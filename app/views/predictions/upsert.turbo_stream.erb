<%# Replace the prediction form with updated state (must include turbo_frame_tag wrapper) %>
<%= turbo_stream.replace dom_id(@match, :prediction) do %>
  <%= turbo_frame_tag dom_id(@match, :prediction) do %>
    <%= render "predictions/match_prediction_form",
                match: @match,
                prediction: @prediction,
                betting_pool: @betting_pool %>
  <% end %>
<% end %>

<%# Also update the chronological view if it exists %>
<%= turbo_stream.replace dom_id(@match, :prediction_chrono) do %>
  <%= turbo_frame_tag dom_id(@match, :prediction_chrono) do %>
    <%= render "predictions/match_prediction_form",
                match: @match,
                prediction: @prediction,
                betting_pool: @betting_pool,
                show_stage: true %>
  <% end %>
<% end %>

<%# Update the progress indicator %>
<%= turbo_stream.replace "prediction-progress" do %>
  <div id="prediction-progress">
    <%= render "predictions/progress_indicator", progress: @prediction_progress %>
  </div>
<% end %>
